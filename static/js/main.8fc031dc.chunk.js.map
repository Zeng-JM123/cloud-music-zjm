{"version":3,"sources":["style.js","layouts/style.js","application/carousel/style.js","application/carousel/index.js","application/options/style.js","application/options/index.js","application/song_sheet/style.js","application/song_sheet/SheetItem.js","application/rank_list/rank_store.js","application/song_sheet/index.js","application/rank_list/style.js","application/rank_list/RankItem.js","application/rank_list/index.js","components/player/index.js","layouts/BlankLayout.js","routes/index.js","layouts/HomeLayout.js","App.js","components/player/store/reducer.js","application/playlist/store/reducer.js","store/reducer.js","index.js","application/playlist/store/constants.js","api/request.js","components/player/store/constants.js","components/player/store/actionCreator.js","application/playlist/store/actionCreator.js","utils/index.js","components/visible_player_btn/style.js","components/visible_player_btn/index.js"],"names":["GlobalStyle","createGlobalStyle","Header","styled","div","CarouselWrapper","SongSheetListWrapper","ul","RankListWrapper","WhiteTheme","CarouselOuter","CarouselComp","useState","imgList","setImgList","length","service","get","then","res","data","autoplay","map","item","i","className","src","alt","li","SheetItemWrap","props","picUrl","SheetListWrapper","SheetItem","sheetInfo","onClick","updateSheet","to","id","title","CURRENT_SHEET_ITEM","type","fromJS","currentSheet","sessionStorage","getItem","JSON","parse","defaultState","connect","state","getIn","dispatch","sheetList","SetSheetList","getSheetList","a","slice","useEffect","RankItemUl","RankItemLi","bgColor","RankItem","RederItem","songInfo","href","path","topList","setTopList","BGCOLOR","getRankList","key","playerState","currentSong","updatePlayerState","audioRef","useRef","current","play","pause","isEmpty","toJS","setAudioSrc","getSong","url","audioSrc","baseURL","ref","preload","layout","route","renderRoutes","routes","SuspenseComponent","Component","fallback","playListComponent","lazy","PlayerContainer","TestComponent","component","BlankLayout","exact","App","actionTypes","currentPlayList","combineReducers","playState","action","window","setItem","stringify","set","playerControl","sheet","store","createStore","rootReducer","ReactDOM","render","document","getElementById","CHANGE_CURRENT_SONG","CURRENT_PLAY_LIST","axios","create","interceptors","request","use","config","token","localStorage","Object","assign","headers","QS","err","response","code","message","msg","PLAYER_STATE","changeCurrentSong","setCurrentList","Array","isArray","findNextItem","arr","findPreviouItem","PlayerBtn","RenderBtn","PauseCircleOutlined","fnClickPlayer","PlayCircleOutlined","console","log","RenderPlayerBtn"],"mappings":"qQAGaA,G,OAAcC,YAAH,+2C,gBCDXC,EAASC,IAAOC,IAAV,mnBAmCNC,EAAkBF,IAAOC,IAAV,qJAUfE,GAFWH,IAAOI,GAAV,0BAEeJ,IAAOC,IAAV,wVAkBpBI,EAAkBL,IAAOC,IAAV,8BAIfK,EAAaN,IAAOC,IAAV,uD,GAIDD,IAAOI,GAAV,0B,gBCvENG,EAAgBP,IAAOC,IAAV,4M,eCGX,SAASO,IAAgB,IAAD,EAEPC,mBAAS,IAFF,mBAE9BC,EAF8B,KAErBC,EAFqB,KAYrC,OAFmB,IAAnBD,EAAQE,QALNC,IAAQC,IAAI,kBAAkBC,MAAK,SAAAC,GACjCL,EAAWK,EAAIC,SAOjB,cAACV,EAAD,UACE,cAAC,IAAD,CAAUW,UAAQ,EAAlB,SACGR,EAAQS,KAAI,SAACC,EAAMC,GAClB,OACE,oBAAYC,UAAU,WAAtB,SACE,qBAAKC,IAAKH,EAAMI,IAAI,8BADbH,UCpBGrB,IAAOyB,GAAV,kZAuBMzB,IAAOI,GAAV,sEAvBjB,I,QCcP,I,6BCdasB,EAAgB1B,IAAOyB,GAAV,8mBAaJ,SAACE,GAAD,OAAWA,EAAMC,UAiB1BC,EAAmB7B,IAAOC,IAAV,0EC5Bd,SAAS6B,EAAUH,GAChC,OACE,cAACD,EAAD,CACEJ,UAAU,aACVM,OAAQD,EAAMI,UAAUR,IACxBS,QAAS,kBAAML,EAAMM,YAAYN,EAAMI,YAHzC,SAKE,eAAC,IAAD,CAAMT,UAAU,YAAYY,GAAI,gBAAkBP,EAAMI,UAAUI,GAAlE,UACE,qBAAKb,UAAU,oBACf,mBAAGA,UAAU,qBAAb,SAAmCK,EAAMI,UAAUK,a,oBCZrDC,EAAqB,qBAEdJ,EAAc,SAAChB,GAC1B,MAAO,CACLqB,KAAMD,EACNpB,KAAMsB,iBAAOtB,KAIXuB,EAAeC,eAAeC,QAAQL,GACxCM,KAAKC,MAAMH,eAAeC,QAAQL,IAClC,GAEEQ,EAAeN,iBAAO,CAC1BC,iBCuBF,I,IAceM,gBAdS,SAACC,GACvB,MAAO,CACLP,aAAcO,EAAMC,MAAM,CAAC,QAAS,qBAIb,SAACC,GAC1B,MAAO,CACLhB,YADK,SACOb,GACV6B,EAAShB,EAAYb,QAKZ0B,EA7Cf,SAAuBnB,GAAO,IAEpBM,EAAgBN,EAAhBM,YAFoB,EAGMxB,mBAAS,IAHf,mBAGrByC,EAHqB,KAGVC,EAHU,KAKtBC,EAAY,uCAAG,4BAAAC,EAAA,sEACDxC,IAAQC,IAAI,oBADX,OACbE,EADa,OAEnBmC,EAAanC,EAAIC,KAAKqC,MAAM,EAAG,IAFZ,2CAAH,qDASlB,OAJAC,oBAAS,sBAAC,sBAAAF,EAAA,sDACRD,IADQ,2CAEP,IAGD,cAACvB,EAAD,UACE,qBAAKP,UAAU,YAAf,SACG4B,EAAU/B,KAAI,SAACC,GACd,OACE,cAACU,EAAD,CACEC,UAAWX,EAEXa,YAAaA,GADRb,EAAKe,cC1BXqB,GAAaxD,IAAOI,GAAV,kDAIVqD,GAAazD,IAAOyB,GAAV,omCAMD,SAACE,GAAD,OAAWA,EAAM+B,WAkBT,SAAC/B,GAAD,OAAWA,EAAMC,UC1BhC,SAAS+B,GAAShC,GAC/B,IAQMiC,EAAY,WAChB,OACEjC,EAAMkC,UACNlC,EAAMkC,SAAS1C,KAAI,SAACC,EAAMC,GACxB,OACE,eAAC,IAAD,CAAMa,GAAId,EAAK0C,KAAMxC,UAAU,yBAA/B,UACE,uBAAMA,UAAU,+BAAhB,UAAgDD,EAAI,EAApD,QACA,sBAAMC,UAAU,gCAAhB,SAAiDF,EAAKgB,UAFKhB,EAAKe,QAQ1E,OACE,eAACsB,GAAD,CAAY7B,OAAQD,EAAMC,OAAQ8B,QAAS/B,EAAM+B,QAAjD,UACE,cAAC,IAAD,CAAMxB,GAAIP,EAAMmC,KAAM9B,QAvBT,WACfL,EAAMM,YAAY,CAChBV,IAAKI,EAAMJ,IACXwC,KAAMpC,EAAMoC,KACZ3B,MAAOT,EAAMS,SAmBb,SACE,sBAAKd,UAAU,kBAAf,UACE,qBAAKA,UAAU,yBAAf,SAAyCK,EAAMS,QAC/C,qBAAKd,UAAU,8BAGnB,qBAAKA,UAAU,mBAAf,SACE,cAACsC,EAAD,SCIR,IAced,gBAdS,SAACC,GACvB,MAAO,CACLP,aAAcO,EAAMC,MAAM,CAAC,QAAS,qBAIb,SAACC,GAC1B,MAAO,CACLhB,YADK,SACOb,GACV6B,EAAShB,EAAYb,QAKZ0B,EA9Cf,SAAkBnB,GAAQ,IAAD,EACOlB,mBAAS,IADhB,mBAChBuD,EADgB,KACPC,EADO,KAEjBC,EAAU,CAAC,UAAW,UAAW,WAC/BjC,EAAgBN,EAAhBM,YAERsB,qBAAU,WACRY,MACC,IAEH,IAAMA,EAAW,uCAAG,8BAAAd,EAAA,sEACAxC,YAAQ,cADR,OAElB,IADMG,EADY,OAETK,EAAI,EAAGA,EAAIL,EAAIC,KAAKL,OAAQS,IACnCL,EAAIC,KAAKI,GAAGqC,QAAUQ,EAAQ7C,GAEhC4C,EAAWjD,EAAIC,MALG,2CAAH,qDAQjB,OACE,cAACuC,GAAD,UACGQ,EAAQ7C,KAAI,SAACC,GACZ,OACE,wBAACuC,GAAD,2BACMvC,GADN,IAEEgD,IAAKhD,EAAKe,GACVF,YAAaA,a,kBCkBzB,IAaea,gBAbS,SAACC,GAAD,MAAY,CAClCsB,YAAatB,EAAMC,MAAM,CAAC,gBAAiB,gBAC3CsB,YAAavB,EAAMC,MAAM,CAAC,YAAa,oBAGd,SAACC,GAC1B,MAAO,CACLsB,kBADK,SACanD,GAChB6B,EAASsB,aAAkBnD,QAKlB0B,EAnDf,SAAgBnB,GACd,IAAM6C,EAAWC,mBACTJ,EAAgD1C,EAAhD0C,YAAgCC,GAAgB3C,EAAnC4C,kBAAmC5C,EAAhB2C,aAExCf,qBAAU,WACJc,EACFG,EAASE,QAAQC,OAEjBH,EAASE,QAAQE,UAElB,CAACP,IAEJd,qBAAU,YACPsB,aAAQP,EAAYQ,SAAWC,EAAYT,EAAYQ,UACvD,CAACR,EAAYQ,OAAO3C,KAEvB,IAAM6C,EAAO,uCAAG,WAAO/D,GAAP,SAAAoC,EAAA,0DACVpC,EAAKgE,IADK,gCAENpE,IAAQC,IAAI,QAAUG,EAAKgE,IAAM,UAAYhE,EAAKmB,OAF5C,2CAAH,sDAMP2C,EAAW,uCAAG,WAAOlB,GAAP,eAAAR,EAAA,6DACd6B,EADc,UACAC,IADA,iBACgBtB,EAASzB,MADzB,iBAEZ4C,EAAQnB,GAFI,OAGlBW,EAASE,UACNF,EAASE,QAAQnD,IAAM2D,KACvBV,EAASE,QAAQxD,UAAW,GALb,2CAAH,sDAajB,OAAO,uBAAOkE,IAAKZ,EAAUlD,UAAU,SAAS+D,QAAQ,Y,SC1C1D,IASeC,GATA,SAAC,GAAe,IAAbC,EAAY,EAAZA,MAChB,OACE,qCACGC,YAAaD,EAAME,QACpB,cAAC,GAAD,QCHAC,GAAoB,SAACC,GAAD,OAAe,SAAChE,GACxC,OACE,cAAC,WAAD,CAAUiE,SAAU,KAApB,SACE,cAACD,EAAD,eAAehE,QAKfkE,GAAoBC,gBAAK,kBAC7B,iCAEIC,GAAkBD,gBAAK,kBAC3B,iCAGIE,GAAgBF,gBAAK,kBAAM,iCAElB,IACb,CACEG,UAAWC,GACXT,OAAQ,CACN,CACE1B,KAAM,IACNoC,OAAO,EACPF,UCbO,WACb,OACE,gCACE,eAAC3F,EAAD,WACE,eAACP,EAAD,WACE,mBAAGuB,UAAU,uBACb,qBAAKA,UAAU,eAAf,SACE,sBAAKA,UAAU,oBAAf,UACE,mBAAGA,UAAU,yBACb,sBAAMA,UAAU,SAAhB,qCAGJ,mBAAGA,UAAU,4BAEf,cAACpB,EAAD,UACE,cAACM,EAAD,MAIF,eAACL,EAAD,WACE,sBAAKmB,UAAU,sBAAf,UACE,qBAAKA,UAAU,6BAAf,sCACA,qBAAKA,UAAU,8BAAf,6BAEF,cAAC,GAAD,OAEF,cAACjB,EAAD,UACE,cAAC,GAAD,SAGJ,cAAC,KAAD,IACA,cAAC,GAAD,SDhBA,CACE0D,KAAM,YACNkC,UAAWP,GAAkBG,IAC7BJ,OAAQ,CACN,CACE1B,KAAM,gBACNkC,UAAWP,GAAkBG,OAInC,CACE9B,KAAM,QACNkC,UAAWP,GAAkBK,IAC7BN,OAAQ,CACN,CACE1B,KAAM,YACNkC,UAAWP,GAAkBK,OAInC,CACEhC,KAAM,YACNkC,UAAWP,GAAkBG,IAC7BJ,OAAQ,CACN,CACE1B,KAAM,gBACNkC,UAAWP,GAAkBG,OAInC,CACE9B,KAAM,QACNkC,UAAWP,GAAkBM,QEzDhBI,G,4JACnB,WACE,OACE,eAAC,IAAD,WACE,cAACvG,EAAD,IACC2F,YAAaC,W,GALWE,a,4BCJ3BtB,KAAc5B,eAAeC,QAAQ2D,OACvC1D,KAAKC,MAAMH,eAAeC,QAAQ2D,OAGhCxD,GAAeN,iBAAO,CAC1B8B,iB,SCLIiC,GAAkB7D,eAAeC,QAAQ2D,MAC3C1D,KAAKC,MAAMH,eAAeC,QAAQ2D,OAClC,GACE/B,GAAc7B,eAAeC,QAAQ2D,MACvC1D,KAAKC,MAAMH,eAAeC,QAAQ2D,OAClC,GAEExD,GAAeN,iBAAO,CAC1B+D,mBACAhC,iBCNaiC,I,MAAAA,2BAAgB,CAC7BC,UDQa,WAAmC,IAAlCzD,EAAiC,uDAAzBF,GAAc4D,EAAW,uCAC/C,OAAQA,EAAOnE,MACb,KAAK+D,KAKH,OAJAK,OAAOjE,eAAekE,QACpB,sBACAhE,KAAKiE,UAAUH,EAAOxF,OAEjB8B,EAAM8D,IAAI,cAAeJ,EAAOxF,MACzC,KAAKoF,KAKH,OAJAK,OAAOjE,eAAekE,QACpB,oBACAhE,KAAKiE,UAAUH,EAAOxF,OAEjB8B,EAAM8D,IAAI,kBAAmBJ,EAAOxF,MAC7C,QACE,OAAO8B,ICtBX+D,cFGa,WAAmC,IAAlC/D,EAAiC,uDAAzBF,GAAc4D,EAAW,uCAC/C,OAAQA,EAAOnE,MACb,KAAK+D,KAEH,OADAK,OAAOjE,eAAekE,QAAQ,eAAgBhE,KAAKiE,UAAUH,EAAOxF,OAC7D8B,EAAM8D,IAAI,cAAeJ,EAAOxF,MACzC,QACE,OAAO8B,IERXgE,MZUqB,WAAmC,IAAlChE,EAAiC,uDAAzBF,EAAc4D,EAAW,uCACvD,OAAQA,EAAOnE,MACb,KAAKD,EAKH,OAJAqE,OAAOjE,eAAekE,QACpB,qBACAhE,KAAKiE,UAAUH,EAAOxF,OAEjB8B,EAAM8D,IAAI,eAAgBJ,EAAOxF,MAC1C,QACE,OAAO8B,O,SapBPiE,GAAQC,aAAYC,IAG1BC,IAASC,OACP,cAAC,IAAD,CAAUJ,MAAOA,GAAjB,SACE,cAAC,GAAD,MAEFK,SAASC,eAAe,U,gCCd1B,oEAAO,IAAMC,EAAsB,sBACtBC,EAAoB,qB,gCCDjC,kFAUarC,EAAkB,0BAEzBtE,EAAU4G,IAAMC,OAAO,CAC3BvC,QAASA,IAIXtE,EAAQ8G,aAAaC,QAAQC,KAC3B,SAACC,GAIC,IAAMC,EACJrB,OAAOsB,aAAatF,QAAQ,cAC5BgE,OAAOjE,eAAeC,QAAQ,aAShC,OARAoF,EAAO7G,KAAOgH,OAAOC,OAAO,GAAIJ,EAAO7G,KAAM,CAC3C8G,MAAOA,IAGTD,EAAOK,QAAU,CACf,eAAgB,oDAElBL,EAAO7G,KAAOmH,IAAGxB,UAAUkB,EAAO7G,MAC3B6G,KAET,SAACO,GAAD,OAASA,KAIXxH,EAAQ8G,aAAaW,SAAST,KAAI,SAAC7G,GACjC,IAAIA,EAAIuH,KAcN,OAAOvH,EAbP,OAAQA,EAAIuH,MACV,KAAK,IACH,OAAOvH,EAAIC,KACb,KAAK,IAGL,KAAK,IAEH,MACF,QACEuH,IAAQH,IAAIrH,EAAIC,KAAKwH,SAOd5H,O,gCC1Df,kCAAO,IAAM6H,EAAe,gB,gCCA5B,sDAGanE,EAAoB,SAACtD,GAChC,MAAO,CACLqB,KAAMoG,IACNzH,KAAMsB,iBAAOtB,M,gCCNjB,wFAGa0H,EAAoB,SAAC1H,GAChC,MAAO,CACLqB,KAAMiF,IACNtG,KAAMsB,iBAAOtB,KAIJ2H,EAAiB,SAAC3H,GAC7B,MAAO,CACLqB,KAAMkF,IACNvG,KAAMsB,iBAAOtB,M,gCCbjB,sGAAO,IAAM4D,EAAU,SAAC5D,GACtB,IAAMqB,SAAcrB,EACpB,MAAa,WAATqB,EACc,KAATrB,GAAwB,cAATA,GAAiC,SAATA,EAEnC,WAATqB,EACEuG,MAAMC,QAAQ7H,GACO,IAAhBA,EAAKL,OAEoB,OAAzB+B,KAAKiE,UAAU3F,QAJ1B,GAUW8H,EAAe,SAACC,EAAK5H,GAEhC,IADA,IAAIgD,EACK/C,EAAI,EAAGA,EAAI2H,EAAIpI,OAAQS,IAC1BD,EAAKe,KAAO6G,EAAI3H,GAAGc,KACrBiC,EAAM/C,GAGV,OAAI+C,EAAM4E,EAAIpI,OAAS,EACdoI,EAAI5E,EAAM,GAEV4E,EAAI,IAIFC,EAAkB,SAACD,EAAK5H,GAEnC,IADA,IAAIgD,EACK/C,EAAI,EAAGA,EAAI2H,EAAIpI,OAAQS,IAC1BD,EAAKe,KAAO6G,EAAI3H,GAAGc,KACrBiC,EAAM/C,GAGV,OAAY,IAAR+C,EACK4E,EAAIA,EAAIpI,OAAS,GAEjBoI,EAAI5E,EAAM,K,mDCrCR8E,E,MAAYlJ,EAAOC,IAAV,0nBAmBM,SAAC0B,GAAD,OAAWA,EAAMC,U,iECkD9BkB,iBAnBS,SAACC,GACvB,MAAO,CACLuB,YAAavB,EAAMC,MAAM,CAAC,YAAa,gBACvCsD,gBAAiBvD,EAAMC,MAAM,CAAC,YAAa,oBAC3CqB,YAAatB,EAAMC,MAAM,CAAC,gBAAiB,oBAIpB,SAACC,GAC1B,MAAO,CACL0F,kBADK,SACavH,GAChB6B,EAAS0F,YAAkBvH,KAE7BmD,kBAJK,SAIanD,GAChB6B,EAASsB,YAAkBnD,QAKlB0B,EA9Df,SAA0BnB,GAAQ,IACxB2C,EAAgD3C,EAAhD2C,YAAaD,EAAmC1C,EAAnC0C,YAAaE,EAAsB5C,EAAtB4C,kBAM5B4E,EAAY,WAChB,OAAI9E,EACK,cAAC+E,EAAA,EAAD,CAAqBpH,QAASqH,IAE9B,cAACC,EAAA,EAAD,CAAoBtH,QAASqH,KAIlCA,EAAgB,WACpBE,QAAQC,IAAIlF,EAAYQ,QACxBP,GAAmBF,IAOfoF,EAAkB,WACtB,OAAI5E,YAAQP,EAAYQ,QACf,6BAGL,eAACoE,EAAD,CAAWtH,OAAQ0C,EAAYQ,OAAOlD,OAAtC,UACE,eAAC,IAAD,CAAMN,UAAU,YAAYY,GAAIoC,EAAYQ,OAAOG,IAAnD,UACE,qBAAK3D,UAAU,eACf,qBAAKA,UAAU,QAAf,SAAwBgD,EAAYQ,OAAO1C,WAE7C,cAAC+G,EAAD,QAMR,OAAO,cAACM,EAAD,S","file":"static/js/main.8fc031dc.chunk.js","sourcesContent":["import { createGlobalStyle } from 'styled-components';\r\nimport './iconfont/iconfont.css';\r\n\r\nexport const GlobalStyle = createGlobalStyle`\r\n\thtml, body, div, span, applet, object, iframe,\r\n\th1, h2, h3, h4, h5, h6, p, blockquote, pre,\r\n\ta, abbr, acronym, address, big, cite, code,\r\n\tdel, dfn, em, img, ins, kbd, q, s, samp,\r\n\tsmall, strike, strong, sub, sup, tt, var,\r\n\tb, u, i, center,\r\n\tdl, dt, dd, ol, ul, li,\r\n\tfieldset, form, label, legend,\r\n\ttable, caption, tbody, tfoot, thead, tr, th, td,\r\n\tarticle, aside, canvas, details, embed, \r\n\tfigure, figcaption, footer, header, hgroup, \r\n\tmenu, nav, output, ruby, section, summary,\r\n\ttime, mark, audio, video {\r\n\t\tmargin: 0;\r\n\t\tpadding: 0;\r\n\t\tborder: 0;\r\n\t\tfont-size: 100%;\r\n\t\tfont: inherit;\r\n\t\tvertical-align: baseline;\r\n\t}\r\n\t/* HTML5 display-role reset for older browsers */\r\n\tarticle, aside, details, figcaption, figure, \r\n\tfooter, header, hgroup, menu, nav, section {\r\n\t\tdisplay: block;\r\n\t}\r\n  .icon {\r\n    width: 1em; height: 1em;\r\n    vertical-align: -0.15em;\r\n    fill: currentColor;\r\n    overflow: hidden;\r\n  }\r\n\tbody {\r\n\t\tline-height: 1;\r\n\t}\r\n\thtml, body{\r\n\t\tbackground: #f2f3f4;;\r\n\t}\r\n\tol, ul {\r\n\t\tlist-style: none;\r\n\t}\r\n\tblockquote, q {\r\n\t\tquotes: none;\r\n\t}\r\n\tblockquote:before, blockquote:after,\r\n\tq:before, q:after {\r\n\t\tcontent: '';\r\n\t\tcontent: none;\r\n\t}\r\n\ttable {\r\n\t\tborder-collapse: collapse;\r\n\t\tborder-spacing: 0;\r\n\t}\r\n\ta{\r\n\t\ttext-decoration: none;\r\n\t\tcolor: #fff;\r\n\t}\r\n`\r\n","import styled from 'styled-components'\r\n\r\nexport const Header = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  height: 32px;\r\n  padding-top: 10px;\r\n  .icon-menu {\r\n    width: 50px;\r\n    text-align: center;\r\n    font-size: 20px;\r\n  }\r\n  .search__body {\r\n    flex: 1;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    height: 100%;\r\n    background-color: #fff;\r\n    border-radius: 30px;\r\n    &--mid {\r\n      .icon-search {\r\n        font-size: 20px;\r\n      }\r\n      .detail {\r\n        margin-left: 5px;\r\n        color: #d8d8d8;\r\n      }\r\n    }\r\n  }\r\n  .icon-avatar {\r\n    width: 50px;\r\n    text-align: center;\r\n    font-size: 20px;\r\n  }\r\n`\r\n\r\nexport const CarouselWrapper = styled.div`\r\n  background-color: #fff;\r\n  margin: 15px 15px 0;\r\n  height: 160px;\r\n  border-radius: 10px;\r\n  border: 1px solid black;\r\n`\r\n\r\nexport const CardList = styled.ul``\r\n\r\nexport const SongSheetListWrapper = styled.div`\r\n  margin-top: 15px;\r\n  padding: 15px 20px;\r\n  background-color: #fff;\r\n  border-top: 1px solid #f3f3f4;\r\n  .recommend-item__top {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    &__title {\r\n      font-weight: 600;\r\n    }\r\n    &__button {\r\n      font-size: 14px;\r\n    }\r\n  }\r\n`\r\n\r\nexport const RankListWrapper = styled.div`\r\n\r\n`\r\n\r\nexport const WhiteTheme = styled.div`\r\n  background-color: #fff;\r\n`\r\n\r\nexport const Footer = styled.ul``\r\n","import styled from \"styled-components\";\r\n\r\nexport const CarouselOuter = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n  .img-item{\r\n    height: 160px;\r\n    img {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  }\r\n`","import React, { useEffect, useState } from 'react';\r\nimport { Carousel } from 'antd';\r\nimport { CarouselOuter } from './style';\r\nimport service from '../../api/request';\r\n\r\nexport default function CarouselComp() {\r\n\r\n  const [imgList, setImgList] = useState([]);\r\n\r\n  const getRecommendBan = () => {\r\n    service.get('/recommend/ban').then(res => {\r\n      setImgList(res.data);\r\n    })\r\n  }\r\n\r\n  imgList.length === 0 && getRecommendBan();\r\n\r\n  return (\r\n    <CarouselOuter>\r\n      <Carousel autoplay>\r\n        {imgList.map((item, i) => {\r\n          return (\r\n            <li key={i} className=\"img-item\">\r\n              <img src={item} alt=\"推荐列表\"/>\r\n            </li>\r\n          )\r\n        })}\r\n      </Carousel>\r\n    </CarouselOuter>\r\n  )\r\n}","import styled from 'styled-components'\r\n\r\nexport const CardItem = styled.li`\r\n  width: 60px;\r\n  height: 60px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  .card-item__button {\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n    &__tag {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  }\r\n  .card-item__detail {\r\n    font-size: 12px;\r\n    margin-top: 5px;\r\n    color: #000;\r\n  }\r\n`\r\n\r\nexport const OptionsCard = styled.ul`\r\n  display: flex;\r\n  margin: 12px 12px 0;\r\n`\r\n","import React from 'react';\r\nimport { OptionsCard } from './style';\r\nimport Option from './Option';\r\n\r\nexport default function Options() {\r\n  return (\r\n    <OptionsCard>\r\n      {optionsList.map(item => {\r\n        return (\r\n          <Option {...item}></Option>\r\n        )\r\n      })}\r\n    </OptionsCard>\r\n  )\r\n}\r\n\r\nconst optionsList = [\r\n  {\r\n    detail: '每日推荐',\r\n    icon: 'icon-bridge',\r\n    url: 'https://music.163.com/discover/recommend/taste',\r\n    key: 111,\r\n    path: '/playlist'\r\n  },\r\n  {\r\n    detail: '私人FM',\r\n    icon: 'icon-desert-1',\r\n    url: 'https://music.163.com/playlist?id=3136952023',\r\n    key: 112,\r\n    path: '/recommend'\r\n  },\r\n  {\r\n    detail: '飙升榜',\r\n    icon: 'icon-mountains',\r\n    url: 'https://music.163.com/discover/toplist?id=19723756',\r\n    key: 113,\r\n    path: '/recommend'\r\n  },\r\n  {\r\n    detail: '说唱榜',\r\n    icon: 'icon-iceberg',\r\n    url: 'https://music.163.com/discover/toplist?id=991319590',\r\n    key: 114,\r\n    path: '/recommend'\r\n  },\r\n  {\r\n    detail: '新歌榜',\r\n    icon: 'icon-sea',\r\n    url: 'https://music.163.com/discover/toplist?id=3779629',\r\n    key: 115,\r\n    path: '/recommend'\r\n  },\r\n  {\r\n    detail: '热歌榜',\r\n    icon: 'icon-cape',\r\n    url: 'https://music.163.com/discover/toplist?id=3778678',\r\n    key: 116,\r\n    path: '/recommend'\r\n  }\r\n]","import styled from 'styled-components'\r\n\r\nexport const SheetItemWrap = styled.li`\r\n  display: inline-block;\r\n  margin: 10px 0;\r\n  width: 33.3%;\r\n  padding: 0 3px;\r\n  .item-link {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: inline-block;\r\n  }\r\n  .sheet-item__img {\r\n    padding-bottom: 100%;\r\n    border-radius: 10px;\r\n    background: url(${(props) => props.picUrl}) no-repeat;\r\n    background-size: 100% 100%;\r\n  }\r\n  .sheet-item__detail {\r\n    height: 36px;\r\n    min-height: 30px;\r\n    line-height: 1.2;\r\n    font-size: 13px;\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 2;\r\n    -webkit-box-orient: vertical;\r\n    overflow: hidden;\r\n    padding: 6px 2px 0 6px;\r\n    color: #000;\r\n  }\r\n`\r\n\r\nexport const SheetListWrapper = styled.div`\r\n  .list-line {\r\n    margin-bottom: 6px;\r\n  }\r\n`\r\n","import React from 'react'\r\nimport { SheetItemWrap } from './style'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function SheetItem(props) {\r\n  return (\r\n    <SheetItemWrap\r\n      className=\"sheet-item\"\r\n      picUrl={props.sheetInfo.src}\r\n      onClick={() => props.updateSheet(props.sheetInfo)}\r\n    >\r\n      <Link className=\"item-link\" to={'/playlist?id=' + props.sheetInfo.id}>\r\n        <div className=\"sheet-item__img\"></div>\r\n        <p className=\"sheet-item__detail\">{props.sheetInfo.title}</p>\r\n      </Link>\r\n    </SheetItemWrap>\r\n  )\r\n}\r\n","import { fromJS } from 'immutable'\r\nconst CURRENT_SHEET_ITEM = 'CURRENT_SHEET_ITEM'\r\n\r\nexport const updateSheet = (data) => {\r\n  return {\r\n    type: CURRENT_SHEET_ITEM,\r\n    data: fromJS(data),\r\n  }\r\n}\r\n\r\nconst currentSheet = sessionStorage.getItem(CURRENT_SHEET_ITEM)\r\n  ? JSON.parse(sessionStorage.getItem(CURRENT_SHEET_ITEM))\r\n  : {}\r\n\r\nconst defaultState = fromJS({\r\n  currentSheet,\r\n})\r\n\r\nexport const reducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case CURRENT_SHEET_ITEM:\r\n      window.sessionStorage.setItem(\r\n        'CURRENT_SHEET_ITEM',\r\n        JSON.stringify(action.data)\r\n      )\r\n      return state.set('currentSheet', action.data)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport SheetItem from './SheetItem'\r\nimport { SheetListWrapper } from './style'\r\nimport service from '../../api/request'\r\nimport { connect } from 'react-redux'\r\nimport { updateSheet } from '../rank_list/rank_store'\r\n\r\nfunction SongSheetList(props) {\r\n  // 获取资源\r\n  const { updateSheet } = props\r\n  const [sheetList, SetSheetList] = useState([])\r\n\r\n  const getSheetList = async () => {\r\n    const res = await service.get('/recommend/sheet')\r\n    SetSheetList(res.data.slice(0, 6))\r\n  }\r\n\r\n  useEffect(async () => {\r\n    getSheetList()\r\n  }, [])\r\n\r\n  return (\r\n    <SheetListWrapper>\r\n      <div className=\"list-line\">\r\n        {sheetList.map((item) => {\r\n          return (\r\n            <SheetItem\r\n              sheetInfo={item}\r\n              key={item.id}\r\n              updateSheet={updateSheet}\r\n            ></SheetItem>\r\n          )\r\n        })}\r\n      </div>\r\n    </SheetListWrapper>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentSheet: state.getIn(['sheet', 'currentSheet']),\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    updateSheet(item) {\r\n      dispatch(updateSheet(item))\r\n    },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SongSheetList)\r\n","import styled from 'styled-components'\r\n\r\nexport const RankItemUl = styled.ul`\r\n  margin-top: -10px;\r\n`\r\n\r\nexport const RankItemLi = styled.li`\r\n  color: #000;\r\n  margin: 10px 20px;\r\n  border-radius: 8px;\r\n  display: flex;\r\n  padding: 20px;\r\n  background-color: ${(props) => props.bgColor};\r\n  /* #FFF4F3 */\r\n  /* #aFFFBA */\r\n  .rank-item__left {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    width: 70px;\r\n    &__title {\r\n      font-weight: 600;\r\n      font-size: 20px;\r\n      color: #000;\r\n    }\r\n    &__img {\r\n      width: 70px;\r\n      height: 70px;\r\n      border-radius: 10px;\r\n      margin-top: 10px;\r\n      background-image: url(${(props) => props.picUrl});\r\n      background-repeat: no-repeat;\r\n      background-size: 100% 100%;\r\n    }\r\n  }\r\n  .rank-item__right {\r\n    padding: 10px 0;\r\n    overflow: hidden;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    margin-left: 30px;\r\n    flex: 1;\r\n    &__info {\r\n      font-size: 14px;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      word-break: normal;\r\n      &__rank {\r\n        color: #000;\r\n      }\r\n      &__title {\r\n        overflow: hidden;\r\n        color: #000;\r\n      }\r\n      &__artiset {\r\n        color: #999;\r\n      }\r\n    }\r\n  }\r\n`\r\n","import React from 'react'\r\nimport { RankItemLi } from './style'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function RankItem(props) {\r\n  const setSheet = () => {\r\n    props.updateSheet({\r\n      src: props.src,\r\n      path: props.path,\r\n      title: props.title,\r\n    })\r\n  }\r\n\r\n  const RederItem = () => {\r\n    return (\r\n      props.songInfo &&\r\n      props.songInfo.map((item, i) => {\r\n        return (\r\n          <Link to={item.href} className=\"rank-item__right__info\" key={item.id}>\r\n            <span className=\"rank-item__right__info__rank\">{i + 1}. </span>\r\n            <span className=\"rank-item__right__info__title\">{item.title}</span>\r\n          </Link>\r\n        )\r\n      })\r\n    )\r\n  }\r\n  return (\r\n    <RankItemLi picUrl={props.picUrl} bgColor={props.bgColor}>\r\n      <Link to={props.href} onClick={setSheet}>\r\n        <div className=\"rank-item__left\">\r\n          <div className=\"rank-item__left__title\">{props.title}</div>\r\n          <div className=\"rank-item__left__img\"></div>\r\n        </div>\r\n      </Link>\r\n      <div className=\"rank-item__right\">\r\n        <RederItem></RederItem>\r\n      </div>\r\n    </RankItemLi>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport RankItem from './RankItem'\r\nimport { RankItemUl } from './style'\r\nimport service from '../../api/request'\r\nimport { updateSheet } from './rank_store'\r\n\r\nfunction RankList(props) {\r\n  const [topList, setTopList] = useState([])\r\n  const BGCOLOR = ['#fff4f3', '#FFF5B2', '#AFffaC']\r\n  const { updateSheet } = props\r\n\r\n  useEffect(() => {\r\n    getRankList()\r\n  }, [])\r\n\r\n  const getRankList = async () => {\r\n    const res = await service('/rank/list')\r\n    for (let i = 0; i < res.data.length; i++) {\r\n      res.data[i].bgColor = BGCOLOR[i]\r\n    }\r\n    setTopList(res.data)\r\n  }\r\n\r\n  return (\r\n    <RankItemUl>\r\n      {topList.map((item) => {\r\n        return (\r\n          <RankItem\r\n            {...item}\r\n            key={item.id}\r\n            updateSheet={updateSheet}\r\n          ></RankItem>\r\n        )\r\n      })}\r\n    </RankItemUl>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentSheet: state.getIn(['sheet', 'currentSheet']),\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    updateSheet(item) {\r\n      dispatch(updateSheet(item))\r\n    },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RankList)\r\n","import React, { useEffect, useRef } from 'react'\r\nimport service from '../../api/request'\r\nimport { connect } from 'react-redux'\r\nimport { updatePlayerState } from './store/actionCreator'\r\nimport { baseURL } from '../../api/request'\r\nimport { isEmpty } from '../../utils/index'\r\n\r\n// 组件功能\r\n// 通过react-redux控制\r\n// 1. 负责播放以及暂停\r\n// 2. 加载音频\r\nfunction Player(props) {\r\n  const audioRef = useRef()\r\n  const { playerState, updatePlayerState, currentSong } = props\r\n\r\n  useEffect(() => {\r\n    if (playerState) {\r\n      audioRef.current.play()\r\n    } else {\r\n      audioRef.current.pause()\r\n    }\r\n  }, [playerState])\r\n\r\n  useEffect(() => {\r\n    !isEmpty(currentSong.toJS()) && setAudioSrc(currentSong.toJS())\r\n  }, [currentSong.toJS().id])\r\n\r\n  const getSong = async (data) => {\r\n    if (data.url) {\r\n      await service.get('/play' + data.url + '&title=' + data.title)\r\n    }\r\n  }\r\n\r\n  const setAudioSrc = async (songInfo) => {\r\n    let audioSrc = `${baseURL}/song/${songInfo.title}.mp3`\r\n    await getSong(songInfo)\r\n    audioRef.current &&\r\n      (audioRef.current.src = audioSrc) &&\r\n      (audioRef.current.autoplay = true)\r\n\r\n    // QQ音乐\r\n    // audioRef.current &&\r\n    //   (audioRef.current.src =\r\n    //     'http://ws.stream.qqmusic.qq.com/C400003pHTmt1BBWWu.m4a?guid=537279276&vkey=E0837A622E978E999A536FD0A3DE08DFD0FF437AFF35B3121C45D0479968B3082B35304077B1D079C34ED2C605B0AD1ED1CA6CD30A6A6A81&uin=399702236&fromtag=66')\r\n  }\r\n\r\n  return <audio ref={audioRef} className=\"player\" preload=\"auto\"></audio>\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  playerState: state.getIn(['playerControl', 'playerState']),\r\n  currentSong: state.getIn(['playState', 'currentSong']),\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    updatePlayerState(item) {\r\n      dispatch(updatePlayerState(item))\r\n    },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Player)\r\n","import React from 'react'\r\nimport { renderRoutes } from 'react-router-config'\r\nimport Player from '../components/player/index'\r\n\r\nconst layout = ({ route }) => {\r\n  return (\r\n    <>\r\n      {renderRoutes(route.routes)}\r\n      <Player />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default layout\r\n","import React, { lazy, Suspense } from 'react'\r\nimport HomeLayout from '../layouts/HomeLayout'\r\nimport BlankLayout from '../layouts/BlankLayout'\r\n// import { Redirect } from 'react-router-dom'\r\n\r\nconst SuspenseComponent = (Component) => (props) => {\r\n  return (\r\n    <Suspense fallback={null}>\r\n      <Component {...props}></Component>\r\n    </Suspense>\r\n  )\r\n}\r\n\r\nconst playListComponent = lazy(() =>\r\n  import('../application/playlist/PlayListContainer.js')\r\n)\r\nconst PlayerContainer = lazy(() =>\r\n  import('../application/playsong/PlayerContainer')\r\n)\r\n\r\nconst TestComponent = lazy(() => import('../application/test/index'))\r\n\r\nexport default [\r\n  {\r\n    component: BlankLayout,\r\n    routes: [\r\n      {\r\n        path: '/',\r\n        exact: true,\r\n        component: HomeLayout,\r\n      },\r\n      {\r\n        path: '/playlist',\r\n        component: SuspenseComponent(playListComponent),\r\n        routes: [\r\n          {\r\n            path: '/playlist?id=',\r\n            component: SuspenseComponent(playListComponent),\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        path: '/song',\r\n        component: SuspenseComponent(PlayerContainer),\r\n        routes: [\r\n          {\r\n            path: '/song/:id',\r\n            component: SuspenseComponent(PlayerContainer),\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        path: '/discover',\r\n        component: SuspenseComponent(playListComponent),\r\n        routes: [\r\n          {\r\n            path: '/playlist?id=',\r\n            component: SuspenseComponent(playListComponent),\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        path: '/test',\r\n        component: SuspenseComponent(TestComponent),\r\n      },\r\n    ],\r\n  },\r\n]\r\n","import React from 'react'\r\nimport {\r\n  Header,\r\n  CarouselWrapper,\r\n  WhiteTheme,\r\n  SongSheetListWrapper,\r\n  Footer,\r\n  RankListWrapper,\r\n} from './style'\r\nimport CarouselComp from '../application/carousel/index'\r\nimport OptionsCard from '../application/options/index'\r\nimport SongSheetList from '../application/song_sheet/index'\r\nimport RankListCard from '../application/rank_list/index'\r\nimport Player from '../components/player/index'\r\nimport VisiblePlayerBtn from '../components/visible_player_btn/index'\r\n\r\nexport default function HomeLayout() {\r\n  return (\r\n    <div>\r\n      <WhiteTheme>\r\n        <Header>\r\n          <i className=\"iconfont icon-menu\"></i>\r\n          <div className=\"search__body\">\r\n            <div className=\"search__body--mid\">\r\n              <i className=\"iconfont icon-search\"></i>\r\n              <span className=\"detail\">曾佳铭</span>\r\n            </div>\r\n          </div>\r\n          <i className=\"iconfont icon-avatar\"></i>\r\n        </Header>\r\n        <CarouselWrapper>\r\n          <CarouselComp />\r\n        </CarouselWrapper>\r\n        {/* <OptionsCard /> */}\r\n        \r\n        <SongSheetListWrapper>\r\n          <div className=\"recommend-item__top\">\r\n            <div className=\"recommend-item__top__title\">推荐歌单</div>\r\n            <div className=\"recommend-item__top__button\">更多</div>\r\n          </div>\r\n          <SongSheetList />\r\n        </SongSheetListWrapper>\r\n        <RankListWrapper>\r\n          <RankListCard></RankListCard>\r\n        </RankListWrapper>\r\n      </WhiteTheme>\r\n      <VisiblePlayerBtn />\r\n      <Player />\r\n      {/* <Footer>\r\n        <li className=\"card-item\">\r\n          <div className=\"card-item__button\">\r\n            <i className=\"iconfont find\"></i>\r\n          </div>\r\n          <div className=\"card-item__detail\">发现</div>\r\n        </li>\r\n      </Footer> */}\r\n    </div>\r\n  )\r\n}\r\n","import React, { Component } from 'react';\nimport { GlobalStyle } from \"./style\";\nimport { renderRoutes } from \"react-router-config\";\nimport routes from './routes/index.js';\nimport { BrowserRouter as Router} from 'react-router-dom'\n\nexport default class App extends Component {\n  render() {\n    return (\n      <Router>\n        <GlobalStyle></GlobalStyle>\n        {renderRoutes(routes)}\n      </Router>\n    )\n  }\n}\n","import * as actionTypes from './constants'\r\nimport { fromJS } from 'immutable'\r\nconst playerState = sessionStorage.getItem(actionTypes.PLAYER_STATE)\r\n  ? JSON.parse(sessionStorage.getItem(actionTypes.PLAYER_STATE))\r\n  : false\r\n\r\nconst defaultState = fromJS({\r\n  playerState,\r\n})\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.PLAYER_STATE:\r\n      window.sessionStorage.setItem('PLAYER_STATE', JSON.stringify(action.data))\r\n      return state.set('playerState', action.data)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import * as actionTypes from './constants'\r\nimport { fromJS } from 'immutable'\r\nconst currentPlayList = sessionStorage.getItem(actionTypes.CURRENT_PLAY_LIST)\r\n  ? JSON.parse(sessionStorage.getItem(actionTypes.CURRENT_PLAY_LIST))\r\n  : []\r\nconst currentSong = sessionStorage.getItem(actionTypes.CHANGE_CURRENT_SONG)\r\n  ? JSON.parse(sessionStorage.getItem(actionTypes.CHANGE_CURRENT_SONG))\r\n  : {}\r\n\r\nconst defaultState = fromJS({\r\n  currentPlayList,\r\n  currentSong,\r\n})\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.CHANGE_CURRENT_SONG:\r\n      window.sessionStorage.setItem(\r\n        'CHANGE_CURRENT_SONG',\r\n        JSON.stringify(action.data)\r\n      )\r\n      return state.set('currentSong', action.data)\r\n    case actionTypes.CURRENT_PLAY_LIST:\r\n      window.sessionStorage.setItem(\r\n        'CURRENT_PLAY_LIST',\r\n        JSON.stringify(action.data)\r\n      )\r\n      return state.set('currentPlayList', action.data)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import { combineReducers } from 'redux-immutable'\r\nimport { reducer as playerStateReducer } from '../components/player/store/index'\r\nimport { reducer as currentSongReducer } from '../application/playlist/store/index'\r\nimport { reducer as sheetStateReducer } from '../application/rank_list/rank_store'\r\n\r\nexport default combineReducers({\r\n  playState: currentSongReducer,\r\n  playerControl: playerStateReducer,\r\n  sheet: sheetStateReducer,\r\n})\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport 'antd/dist/antd.css'\nimport { Provider } from 'react-redux'\nimport rootReducer from './store/reducer'\nimport { createStore } from 'redux'\nconst store = createStore(rootReducer)\n\n// 会被编译成React.createElement()\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n","export const CHANGE_CURRENT_SONG = 'CHANGE_CURRENT_SONG'\r\nexport const CURRENT_PLAY_LIST = 'CURRENT_PLAY_LIST'\r\n","import axios from 'axios'\r\nimport QS from 'qs'\r\nimport { message } from 'antd'\r\n\r\n// 保存环境变量\r\nconst isPrd = process.env.NODE_ENV == 'production'\r\n\r\nconst devUrl = 'http://localhost:8083'\r\n// http://192.168.137.22:8083\r\n// 区分开发环境还是生产环境\r\nexport const baseURL = isPrd ? 'http://172.20.10.6:8083' : devUrl\r\n\r\nconst service = axios.create({\r\n  baseURL: baseURL,\r\n})\r\n\r\n// 请求拦截器\r\nservice.interceptors.request.use(\r\n  (config) => {\r\n    // 每次发送请求之前本地存储中是否存在token，也可以通过redux在本地拿到token\r\n    // 如果存在，则统一在http请求中加上token\r\n    // 即使存在token，有可能是过期的，在响应拦截器中对返回状态进行判断\r\n    const token =\r\n      window.localStorage.getItem('userToken') ||\r\n      window.sessionStorage.getItem('userToken')\r\n    config.data = Object.assign({}, config.data, {\r\n      token: token,\r\n    })\r\n    // 设置请求头\r\n    config.headers = {\r\n      'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8',\r\n    }\r\n    config.data = QS.stringify(config.data)\r\n    return config\r\n  },\r\n  (err) => err\r\n)\r\n\r\n// 响应拦截器\r\nservice.interceptors.response.use((res) => {\r\n  if (res.code) {\r\n    switch (res.code) {\r\n      case 200:\r\n        return res.data\r\n      case 401:\r\n        // 未登录\r\n        break\r\n      case 403:\r\n        // token过期处理\r\n        break\r\n      default:\r\n        message.err(res.data.msg)\r\n    }\r\n  } else {\r\n    return res\r\n  }\r\n})\r\n\r\nexport default service\r\n","export const PLAYER_STATE = 'PLAYER_STATE'\r\n","import { PLAYER_STATE } from './constants'\r\nimport { fromJS } from 'immutable'\r\n\r\nexport const updatePlayerState = (data) => {\r\n  return {\r\n    type: PLAYER_STATE,\r\n    data: fromJS(data),\r\n  }\r\n}\r\n","import { CHANGE_CURRENT_SONG, CURRENT_PLAY_LIST } from './constants'\r\nimport { fromJS } from 'immutable'\r\n\r\nexport const changeCurrentSong = (data) => {\r\n  return {\r\n    type: CHANGE_CURRENT_SONG,\r\n    data: fromJS(data),\r\n  }\r\n}\r\n\r\nexport const setCurrentList = (data) => {\r\n  return {\r\n    type: CURRENT_PLAY_LIST,\r\n    data: fromJS(data),\r\n  }\r\n}\r\n","export const isEmpty = (data) => {\r\n  const type = typeof data\r\n  if (type === 'string') {\r\n    return data !== '' && data !== 'undefined' && data !== 'null'\r\n  }\r\n  if (type === 'object') {\r\n    if (Array.isArray(data)) {\r\n      return data.length === 0\r\n    } else {\r\n      return JSON.stringify(data) === '{}'\r\n    }\r\n  }\r\n}\r\n\r\n// 根据id去找到数组的下一位\r\nexport const findNextItem = (arr, item) => {\r\n  let key\r\n  for (let i = 0; i < arr.length; i++) {\r\n    if (item.id === arr[i].id) {\r\n      key = i\r\n    }\r\n  }\r\n  if (key < arr.length - 1) {\r\n    return arr[key + 1]\r\n  } else {\r\n    return arr[0]\r\n  }\r\n}\r\n\r\nexport const findPreviouItem = (arr, item) => {\r\n  let key\r\n  for (let i = 0; i < arr.length; i++) {\r\n    if (item.id === arr[i].id) {\r\n      key = i\r\n    }\r\n  }\r\n  if (key === 0) {\r\n    return arr[arr.length - 1]\r\n  } else {\r\n    return arr[key - 1]\r\n  }\r\n}\r\n","import styled from 'styled-components'\r\n\r\nexport const PlayerBtn = styled.div`\r\n  position: fixed;\r\n  bottom: 0;\r\n  height: 40px;\r\n  display: flex;\r\n  width: 100%;\r\n  background-color: #f2f4be;\r\n  align-items: center;\r\n  padding: 0 20px;\r\n  .to-player {\r\n    flex: 1;\r\n    display: flex;\r\n    align-items: center;\r\n    color: #000;\r\n  }\r\n  .player-img {\r\n    width: 35px;\r\n    height: 35px;\r\n    border-radius: 50%;\r\n    background-image: url(${(props) => props.picUrl});\r\n    background-size: 100% 100%;\r\n    background-repeat: no-repeat;\r\n  }\r\n  .title {\r\n    font-weight: 600;\r\n    margin-left: 10px;\r\n    flex: 1;\r\n    white-space: nowrap;\r\n  }\r\n  .anticon {\r\n    font-size: 20px;\r\n    width: 50px;\r\n  }\r\n`\r\n","import React, { useEffect } from 'react'\r\nimport { PlayerBtn } from './style'\r\nimport { connect } from 'react-redux'\r\nimport { updatePlayerState } from '../../components/player/store/actionCreator'\r\nimport { PlayCircleOutlined, PauseCircleOutlined } from '@ant-design/icons'\r\nimport { changeCurrentSong } from '../../application/playlist/store/actionCreator'\r\nimport { isEmpty } from '../../utils/index'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction VisiblePlayerBtn(props) {\r\n  const { currentSong, playerState, updatePlayerState } = props\r\n  // 功能\r\n  // 1. 控制播放暂停\r\n  // 2. 图片旋转\r\n  // 3. 查看歌单\r\n\r\n  const RenderBtn = () => {\r\n    if (playerState) {\r\n      return <PauseCircleOutlined onClick={fnClickPlayer} />\r\n    } else {\r\n      return <PlayCircleOutlined onClick={fnClickPlayer} />\r\n    }\r\n  }\r\n\r\n  const fnClickPlayer = () => {\r\n    console.log(currentSong.toJS())\r\n    updatePlayerState(!playerState)\r\n  }\r\n\r\n  // useEffect(() => {\r\n  //   console.log(currentSong.toJS(), 123)\r\n  // }, [])\r\n\r\n  const RenderPlayerBtn = () => {\r\n    if (isEmpty(currentSong.toJS())) {\r\n      return <></>\r\n    } else {\r\n      return (\r\n        <PlayerBtn picUrl={currentSong.toJS().picUrl}>\r\n          <Link className=\"to-player\" to={currentSong.toJS().url}>\r\n            <div className=\"player-img\"></div>\r\n            <div className=\"title\">{currentSong.toJS().title}</div>\r\n          </Link>\r\n          <RenderBtn />\r\n        </PlayerBtn>\r\n      )\r\n    }\r\n  }\r\n\r\n  return <RenderPlayerBtn />\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentSong: state.getIn(['playState', 'currentSong']),\r\n    currentPlayList: state.getIn(['playState', 'currentPlayList']),\r\n    playerState: state.getIn(['playerControl', 'playerState']),\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    changeCurrentSong(item) {\r\n      dispatch(changeCurrentSong(item))\r\n    },\r\n    updatePlayerState(item) {\r\n      dispatch(updatePlayerState(item))\r\n    },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(VisiblePlayerBtn)\r\n"],"sourceRoot":""}