(this["webpackJsonpreact-study"]=this["webpackJsonpreact-study"]||[]).push([[0],{119:function(t,e,n){},147:function(t,e){},170:function(t,e,n){"use strict";n.r(e);var r,a,i,c,o,s,l,u,d,b,p,f=n(0),h=n(30),j=n.n(h),g=n(77),m=n(78),x=n(95),O=n(94),y=n(15),_=n(16),v=(n(119),Object(_.a)(r||(r=Object(y.a)(["\n\thtml, body, div, span, applet, object, iframe,\n\th1, h2, h3, h4, h5, h6, p, blockquote, pre,\n\ta, abbr, acronym, address, big, cite, code,\n\tdel, dfn, em, img, ins, kbd, q, s, samp,\n\tsmall, strike, strong, sub, sup, tt, var,\n\tb, u, i, center,\n\tdl, dt, dd, ol, ul, li,\n\tfieldset, form, label, legend,\n\ttable, caption, tbody, tfoot, thead, tr, th, td,\n\tarticle, aside, canvas, details, embed, \n\tfigure, figcaption, footer, header, hgroup, \n\tmenu, nav, output, ruby, section, summary,\n\ttime, mark, audio, video {\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tborder: 0;\n\t\tfont-size: 100%;\n\t\tfont: inherit;\n\t\tvertical-align: baseline;\n\t}\n\t/* HTML5 display-role reset for older browsers */\n\tarticle, aside, details, figcaption, figure, \n\tfooter, header, hgroup, menu, nav, section {\n\t\tdisplay: block;\n\t}\n  .icon {\n    width: 1em; height: 1em;\n    vertical-align: -0.15em;\n    fill: currentColor;\n    overflow: hidden;\n  }\n\tbody {\n\t\tline-height: 1;\n\t}\n\thtml, body{\n\t\tbackground: #f2f3f4;;\n\t}\n\tol, ul {\n\t\tlist-style: none;\n\t}\n\tblockquote, q {\n\t\tquotes: none;\n\t}\n\tblockquote:before, blockquote:after,\n\tq:before, q:after {\n\t\tcontent: '';\n\t\tcontent: none;\n\t}\n\ttable {\n\t\tborder-collapse: collapse;\n\t\tborder-spacing: 0;\n\t}\n\ta{\n\t\ttext-decoration: none;\n\t\tcolor: #fff;\n\t}\n"])))),S=n(60),w=n(38),k=_.b.div(a||(a=Object(y.a)(["\n  display: flex;\n  align-items: center;\n  height: 32px;\n  padding-top: 10px;\n  .icon-menu {\n    width: 50px;\n    text-align: center;\n    font-size: 20px;\n  }\n  .search__body {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    background-color: #fff;\n    border-radius: 30px;\n    &--mid {\n      .icon-search {\n        font-size: 20px;\n      }\n      .detail {\n        margin-left: 5px;\n        color: #d8d8d8;\n      }\n    }\n  }\n  .icon-avatar {\n    width: 50px;\n    text-align: center;\n    font-size: 20px;\n  }\n"]))),N=_.b.div(i||(i=Object(y.a)(["\n  background-color: #fff;\n  margin: 15px 15px 0;\n  height: 160px;\n  border-radius: 10px;\n  border: 1px solid black;\n"]))),I=(_.b.ul(c||(c=Object(y.a)([""]))),_.b.div(o||(o=Object(y.a)(["\n  margin-top: 15px;\n  padding: 15px 20px;\n  background-color: #fff;\n  border-top: 1px solid #f3f3f4;\n  .recommend-item__top {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    &__title {\n      font-weight: 600;\n    }\n    &__button {\n      font-size: 14px;\n    }\n  }\n"])))),J=_.b.div(s||(s=Object(y.a)(["\n\n"]))),C=_.b.div(l||(l=Object(y.a)(["\n  background-color: #fff;\n"]))),E=(_.b.ul(u||(u=Object(y.a)([""]))),n(41)),T=n(173),R=_.b.div(d||(d=Object(y.a)(["\n  width: 100%;\n  height: 100%;\n  border-radius: 10px;\n  overflow: hidden;\n  .img-item{\n    height: 160px;\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n"]))),z=n(32),U=n(3);function F(){var t=Object(f.useState)([]),e=Object(E.a)(t,2),n=e[0],r=e[1];return 0===n.length&&z.b.get("/recommend/ban").then((function(t){r(t.data)})),Object(U.jsx)(R,{children:Object(U.jsx)(T.a,{autoplay:!0,children:n.map((function(t,e){return Object(U.jsx)("li",{className:"img-item",children:Object(U.jsx)("img",{src:t,alt:"\u63a8\u8350\u5217\u8868"})},e)}))})})}_.b.li(b||(b=Object(y.a)(["\n  width: 60px;\n  height: 60px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  .card-item__button {\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    &__tag {\n      width: 100%;\n      height: 100%;\n    }\n  }\n  .card-item__detail {\n    font-size: 12px;\n    margin-top: 5px;\n    color: #000;\n  }\n"]))),_.b.ul(p||(p=Object(y.a)(["\n  display: flex;\n  margin: 12px 12px 0;\n"])));var A=n(29);var L,P,q=n(23),H=n.n(q),G=n(35),Y=_.b.li(L||(L=Object(y.a)(["\n  display: inline-block;\n  margin: 10px 0;\n  width: 33.3%;\n  padding: 0 3px;\n  .item-link {\n    width: 100%;\n    height: 100%;\n    display: inline-block;\n  }\n  .sheet-item__img {\n    padding-bottom: 100%;\n    border-radius: 10px;\n    background: url(",") no-repeat;\n    background-size: 100% 100%;\n  }\n  .sheet-item__detail {\n    height: 36px;\n    min-height: 30px;\n    line-height: 1.2;\n    font-size: 13px;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    padding: 6px 2px 0 6px;\n    color: #000;\n  }\n"])),(function(t){return t.picUrl})),B=_.b.div(P||(P=Object(y.a)(["\n  .list-line {\n    margin-bottom: 6px;\n  }\n"])));function M(t){return Object(U.jsx)(Y,{className:"sheet-item",picUrl:t.sheetInfo.src,onClick:function(){return t.updateSheet(t.sheetInfo)},children:Object(U.jsxs)(A.b,{className:"item-link",to:"/playlist?id="+t.sheetInfo.id,children:[Object(U.jsx)("div",{className:"sheet-item__img"}),Object(U.jsx)("p",{className:"sheet-item__detail",children:t.sheetInfo.title})]})})}var D=n(33),K=n(21),Q="CURRENT_SHEET_ITEM",V=function(t){return{type:Q,data:Object(K.fromJS)(t)}},W=sessionStorage.getItem(Q)?JSON.parse(sessionStorage.getItem(Q)):{},X=Object(K.fromJS)({currentSheet:W});var Z,$,tt=Object(D.b)((function(t){return{currentSheet:t.getIn(["sheet","currentSheet"])}}),(function(t){return{updateSheet:function(e){t(V(e))}}}))((function(t){var e=t.updateSheet,n=Object(f.useState)([]),r=Object(E.a)(n,2),a=r[0],i=r[1],c=function(){var t=Object(G.a)(H.a.mark((function t(){var e;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.b.get("/recommend/sheet");case 2:e=t.sent,i(e.data.slice(0,6));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(f.useEffect)(Object(G.a)(H.a.mark((function t(){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c();case 1:case"end":return t.stop()}}),t)}))),[]),Object(U.jsx)(B,{children:Object(U.jsx)("div",{className:"list-line",children:a.map((function(t){return Object(U.jsx)(M,{sheetInfo:t,updateSheet:e},t.id)}))})})})),et=_.b.ul(Z||(Z=Object(y.a)(["\n  margin-top: -10px;\n"]))),nt=_.b.li($||($=Object(y.a)(["\n  color: #000;\n  margin: 10px 20px;\n  border-radius: 8px;\n  display: flex;\n  padding: 20px;\n  background-color: ",";\n  /* #FFF4F3 */\n  /* #aFFFBA */\n  .rank-item__left {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 70px;\n    &__title {\n      font-weight: 600;\n      font-size: 20px;\n      color: #000;\n    }\n    &__img {\n      width: 70px;\n      height: 70px;\n      border-radius: 10px;\n      margin-top: 10px;\n      background-image: url(",");\n      background-repeat: no-repeat;\n      background-size: 100% 100%;\n    }\n  }\n  .rank-item__right {\n    padding: 10px 0;\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    margin-left: 30px;\n    flex: 1;\n    &__info {\n      font-size: 14px;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      word-break: normal;\n      &__rank {\n        color: #000;\n      }\n      &__title {\n        overflow: hidden;\n        color: #000;\n      }\n      &__artiset {\n        color: #999;\n      }\n    }\n  }\n"])),(function(t){return t.bgColor}),(function(t){return t.picUrl}));function rt(t){var e=function(){return t.songInfo&&t.songInfo.map((function(t,e){return Object(U.jsxs)(A.b,{to:t.href,className:"rank-item__right__info",children:[Object(U.jsxs)("span",{className:"rank-item__right__info__rank",children:[e+1,". "]}),Object(U.jsx)("span",{className:"rank-item__right__info__title",children:t.title})]},t.id)}))};return Object(U.jsxs)(nt,{picUrl:t.picUrl,bgColor:t.bgColor,children:[Object(U.jsx)(A.b,{to:t.href,onClick:function(){t.updateSheet({src:t.src,path:t.path,title:t.title})},children:Object(U.jsxs)("div",{className:"rank-item__left",children:[Object(U.jsx)("div",{className:"rank-item__left__title",children:t.title}),Object(U.jsx)("div",{className:"rank-item__left__img"})]})}),Object(U.jsx)("div",{className:"rank-item__right",children:Object(U.jsx)(e,{})})]})}var at=Object(D.b)((function(t){return{currentSheet:t.getIn(["sheet","currentSheet"])}}),(function(t){return{updateSheet:function(e){t(V(e))}}}))((function(t){var e=Object(f.useState)([]),n=Object(E.a)(e,2),r=n[0],a=n[1],i=["#fff4f3","#FFF5B2","#AFffaC"],c=t.updateSheet;Object(f.useEffect)((function(){o()}),[]);var o=function(){var t=Object(G.a)(H.a.mark((function t(){var e,n;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(z.b)("/rank/list");case 2:for(e=t.sent,n=0;n<e.data.length;n++)e.data[n].bgColor=i[n];a(e.data);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(U.jsx)(et,{children:r.map((function(t){return Object(f.createElement)(rt,Object(w.a)(Object(w.a)({},t),{},{key:t.id,updateSheet:c}))}))})})),it=n(40),ct=n(53);var ot=Object(D.b)((function(t){return{playerState:t.getIn(["playerControl","playerState"]),currentSong:t.getIn(["playState","currentSong"])}}),(function(t){return{updatePlayerState:function(e){t(Object(it.a)(e))}}}))((function(t){var e=Object(f.useRef)(),n=t.playerState,r=(t.updatePlayerState,t.currentSong);Object(f.useEffect)((function(){n?e.current.play():e.current.pause()}),[n]),Object(f.useEffect)((function(){!Object(ct.c)(r.toJS())&&i(r.toJS())}),[r.toJS().id]);var a=function(){var t=Object(G.a)(H.a.mark((function t(e){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.url){t.next=3;break}return t.next=3,z.b.get("/play"+e.url+"&title="+e.title);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(G.a)(H.a.mark((function t(n){var r;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(z.a,"/song/").concat(n.title,".mp3"),t.next=3,a(n);case 3:e.current&&(e.current.src=r)&&(e.current.autoplay=!0);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(U.jsx)("audio",{ref:e,className:"player",preload:"auto"})})),st=n(96);var lt=function(t){var e=t.route;return Object(U.jsxs)(U.Fragment,{children:[Object(S.a)(e.routes),Object(U.jsx)(ot,{})]})},ut=function(t){return function(e){return Object(U.jsx)(f.Suspense,{fallback:null,children:Object(U.jsx)(t,Object(w.a)({},e))})}},dt=Object(f.lazy)((function(){return n.e(3).then(n.bind(null,180))})),bt=Object(f.lazy)((function(){return n.e(4).then(n.bind(null,179))})),pt=Object(f.lazy)((function(){return n.e(5).then(n.bind(null,178))})),ft=[{component:lt,routes:[{path:"/",exact:!0,component:function(){return Object(U.jsxs)("div",{children:[Object(U.jsxs)(C,{children:[Object(U.jsxs)(k,{children:[Object(U.jsx)("i",{className:"iconfont icon-menu"}),Object(U.jsx)("div",{className:"search__body",children:Object(U.jsxs)("div",{className:"search__body--mid",children:[Object(U.jsx)("i",{className:"iconfont icon-search"}),Object(U.jsx)("span",{className:"detail",children:"\u66fe\u4f73\u94ed"})]})}),Object(U.jsx)("i",{className:"iconfont icon-avatar"})]}),Object(U.jsx)(N,{children:Object(U.jsx)(F,{})}),Object(U.jsxs)(I,{children:[Object(U.jsxs)("div",{className:"recommend-item__top",children:[Object(U.jsx)("div",{className:"recommend-item__top__title",children:"\u63a8\u8350\u6b4c\u5355"}),Object(U.jsx)("div",{className:"recommend-item__top__button",children:"\u66f4\u591a"})]}),Object(U.jsx)(tt,{})]}),Object(U.jsx)(J,{children:Object(U.jsx)(at,{})})]}),Object(U.jsx)(st.a,{}),Object(U.jsx)(ot,{})]})}},{path:"/playlist",component:ut(dt),routes:[{path:"/playlist?id=",component:ut(dt)}]},{path:"/song",component:ut(bt),routes:[{path:"/song/:id",component:ut(bt)}]},{path:"/discover",component:ut(dt),routes:[{path:"/playlist?id=",component:ut(dt)}]},{path:"/test",component:ut(pt)}]}],ht=function(t){Object(x.a)(n,t);var e=Object(O.a)(n);function n(){return Object(g.a)(this,n),e.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return Object(U.jsxs)(A.a,{children:[Object(U.jsx)(v,{}),Object(S.a)(ft)]})}}]),n}(f.Component),jt=(n(165),n(112)),gt=n(36),mt=!!sessionStorage.getItem(gt.a)&&JSON.parse(sessionStorage.getItem(gt.a)),xt=Object(K.fromJS)({playerState:mt}),Ot=n(26),yt=sessionStorage.getItem(Ot.b)?JSON.parse(sessionStorage.getItem(Ot.b)):[],_t=sessionStorage.getItem(Ot.a)?JSON.parse(sessionStorage.getItem(Ot.a)):{},vt=Object(K.fromJS)({currentPlayList:yt,currentSong:_t}),St=(n(51),Object(jt.combineReducers)({playState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Ot.a:return window.sessionStorage.setItem("CHANGE_CURRENT_SONG",JSON.stringify(e.data)),t.set("currentSong",e.data);case Ot.b:return window.sessionStorage.setItem("CURRENT_PLAY_LIST",JSON.stringify(e.data)),t.set("currentPlayList",e.data);default:return t}},playerControl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case gt.a:return window.sessionStorage.setItem("PLAYER_STATE",JSON.stringify(e.data)),t.set("playerState",e.data);default:return t}},sheet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Q:return window.sessionStorage.setItem("CURRENT_SHEET_ITEM",JSON.stringify(e.data)),t.set("currentSheet",e.data);default:return t}}})),wt=n(59),kt=Object(wt.b)(St);j.a.render(Object(U.jsx)(D.a,{store:kt,children:Object(U.jsx)(ht,{})}),document.getElementById("root"))},26:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var r="CHANGE_CURRENT_SONG",a="CURRENT_PLAY_LIST"},32:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(100),a=n.n(r),i=n(101),c=n.n(i),o=n(75),s="http://172.20.10.6:8083",l=a.a.create({baseURL:s});l.interceptors.request.use((function(t){var e=window.localStorage.getItem("userToken")||window.sessionStorage.getItem("userToken");return t.data=Object.assign({},t.data,{token:e}),t.headers={"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},t.data=c.a.stringify(t.data),t}),(function(t){return t})),l.interceptors.response.use((function(t){if(!t.code)return t;switch(t.code){case 200:return t.data;case 401:case 403:break;default:o.b.err(t.data.msg)}})),e.b=l},36:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="PLAYER_STATE"},40:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(36),a=n(21),i=function(t){return{type:r.a,data:Object(a.fromJS)(t)}}},51:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return c}));var r=n(26),a=n(21),i=function(t){return{type:r.a,data:Object(a.fromJS)(t)}},c=function(t){return{type:r.b,data:Object(a.fromJS)(t)}}},53:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var r=function(t){var e=typeof t;return"string"===e?""!==t&&"undefined"!==t&&"null"!==t:"object"===e?Array.isArray(t)?0===t.length:"{}"===JSON.stringify(t):void 0},a=function(t,e){for(var n,r=0;r<t.length;r++)e.id===t[r].id&&(n=r);return n<t.length-1?t[n+1]:t[0]},i=function(t,e){for(var n,r=0;r<t.length;r++)e.id===t[r].id&&(n=r);return 0===n?t[t.length-1]:t[n-1]}},96:function(t,e,n){"use strict";n(0);var r,a=n(15),i=n(16).b.div(r||(r=Object(a.a)(["\n  position: fixed;\n  bottom: 0;\n  height: 40px;\n  display: flex;\n  width: 100%;\n  background-color: #f2f4be;\n  align-items: center;\n  padding: 0 20px;\n  .to-player {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    color: #000;\n  }\n  .player-img {\n    width: 35px;\n    height: 35px;\n    border-radius: 50%;\n    background-image: url(",");\n    background-size: 100% 100%;\n    background-repeat: no-repeat;\n  }\n  .title {\n    font-weight: 600;\n    margin-left: 10px;\n    flex: 1;\n    white-space: nowrap;\n  }\n  .anticon {\n    font-size: 20px;\n    width: 50px;\n  }\n"])),(function(t){return t.picUrl})),c=n(33),o=n(40),s=n(174),l=n(175),u=n(51),d=n(53),b=n(29),p=n(3);e.a=Object(c.b)((function(t){return{currentSong:t.getIn(["playState","currentSong"]),currentPlayList:t.getIn(["playState","currentPlayList"]),playerState:t.getIn(["playerControl","playerState"])}}),(function(t){return{changeCurrentSong:function(e){t(Object(u.a)(e))},updatePlayerState:function(e){t(Object(o.a)(e))}}}))((function(t){var e=t.currentSong,n=t.playerState,r=t.updatePlayerState,a=function(){return n?Object(p.jsx)(s.a,{onClick:c}):Object(p.jsx)(l.a,{onClick:c})},c=function(){console.log(e.toJS()),r(!n)},o=function(){return Object(d.c)(e.toJS())?Object(p.jsx)(p.Fragment,{}):Object(p.jsxs)(i,{picUrl:e.toJS().picUrl,children:[Object(p.jsxs)(b.b,{className:"to-player",to:e.toJS().url,children:[Object(p.jsx)("div",{className:"player-img"}),Object(p.jsx)("div",{className:"title",children:e.toJS().title})]}),Object(p.jsx)(a,{})]})};return Object(p.jsx)(o,{})}))}},[[170,1,2]]]);
//# sourceMappingURL=main.8fc031dc.chunk.js.map